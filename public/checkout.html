<!-- <!DOCTYPE html>
<html>
  <head>
    <title>Subscribe to a cool new product</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://js.stripe.com/v3/"></script>
  </head>
  <body>
    <section>
      <div class="product">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14px" height="16px" viewBox="0 0 14 16" version="1.1">
            <defs/>
            <g id="Flow" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="0-Default" transform="translate(-121.000000, -40.000000)" fill="#E184DF">
                    <path d="M127,50 L126,50 C123.238576,50 121,47.7614237 121,45 C121,42.2385763 123.238576,40 126,40 L135,40 L135,56 L133,56 L133,42 L129,42 L129,56 L127,56 L127,50 Z M127,48 L127,42 L126,42 C124.343146,42 123,43.3431458 123,45 C123,46.6568542 124.343146,48 126,48 L127,48 Z" id="Pilcrow"/>
                </g>
            </g>
        </svg>
        <div class="description">
          <h3>Starter plan</h3>
          <h5>$50.00 / month</h5>
        </div>
      </div>
      <form action="/create-checkout-session" method="POST">
        <input type="hidden" name="lookup_key" value="basic" />
        <button id="checkout-and-portal-button" type="submit">Checkout</button>
      </form>
    </section>
  </body>
</html> -->

<!-- <!DOCTYPE html>
<html>
  <head>
    <title>Subscribe to a cool new product</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://js.stripe.com/v3/"></script>
  </head>
  <body>
    <section id="products-section">
    </section>
    <script>
      fetch('/products')
        .then(res => res.json())
        .then(products => {
          const section = document.getElementById('products-section');
          products.forEach(product => {
            section.innerHTML += `
              <div class="product">
                <div class="description">
                  <h3>${product.name}</h3>
                  <h5>${(product.unit_amount / 100).toFixed(2)} ${product.currency.toUpperCase()} / ${product.interval}</h5>
                </div>
                <form action="/create-checkout-session" method="POST">
                  <input type="hidden" name="lookup_key" value="${product.lookup_key || ''}" />
                  <button type="submit">Checkout</button>
                </form>
              </div>
            `;
          });
        });
    </script>
  </body>
</html> -->


<!DOCTYPE html>
<html>
  <head>
    <title>Subscribe to a cool new product</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
       body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #f3e6fa 0%, #e9e4f0 100%);
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',
          'Helvetica Neue', 'Ubuntu', sans-serif;
        height: 100vh;
        margin: 0;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      } 
      #products-section {
        display: flex;
        flex-direction: row;
        gap: 24px;
        justify-content: center;
        align-items: flex-start;
        margin-top: 40px;
      }
      .product {
        border: 1px solid #eee;
        border-radius: 8px;
        padding: 24px 32px;
        background: #faf7fd;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        min-width: 220px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .description {
        margin-bottom: 16px;
        text-align: center;
      }
      .product h3 {
        margin: 0 0 8px 0;
      }
      .product h5 {
        margin: 0;
        color: #8e44ad;
      }
      .product form {
        width: 100%;
      }
      .product button {
        width: 100%;
        padding: 10px 0;
        background: #8e44ad;
        color: #fff;
        border: none;
        border-radius: 4px;
        font-size: 1em;
        cursor: pointer;
        transition: background 0.2s;
      }
      .product button:hover {
        background: #6c3483;
      }
    </style>
  </head>
  <body>
    <section id="products-section">
    </section>
    <script>
      fetch('/products')
        .then(res => res.json())
        .then(products => {
          const section = document.getElementById('products-section');
          products.forEach(product => {
            section.innerHTML += `
              <div class="product">
                <div class="description">
                  <h3>${product.name}</h3>
                  <h5>${product.description || 'No description available'}</h5>
                  <h5>${(product.unit_amount / 100).toFixed(2)} ${product.currency.toUpperCase()} / ${product.interval}</h5>
                </div>
                <form action="/create-checkout-session" method="POST">
                  <input type="hidden" name="lookup_key" value="${product.lookup_key || ''}" />
                  <button type="submit">Checkout</button>
                </form>
              </div>
            `;
          });
        });
    </script>
  </body>
</html>